FROM node:22-alpine

WORKDIR /app

# 모노리포 루트의 package.json 복사
COPY package.json yarn.lock ./

# Admin 패키지의 package.json 복사
COPY packages/admin/package.json ./packages/admin/

# 의존성 설치 (모노리포 루트에서)
RUN yarn install

# Admin 패키지 의존성도 설치
WORKDIR /app/packages/admin
RUN yarn install

# 루트로 돌아가기
WORKDIR /app

# 소스코드는 볼륨 마운트로 처리

EXPOSE 3000

WORKDIR /app/packages/admin

CMD ["yarn", "dev", "--host", "0.0.0.0"]
